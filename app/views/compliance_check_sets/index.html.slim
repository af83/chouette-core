- breadcrumb :compliance_check_sets, @workbench

.page_content
  .container-fluid
    .row
      .col-lg-12
        = render 'filters'
      .row
        .col-lg-12
          .select_table
            = table_builder_2 @compliance_check_sets,
              [ \
                TableBuilderHelper::Column.new( \
                  key: :ref, \
                  attribute: 'id' \
                ), \
                TableBuilderHelper::Column.new( \
                  key: :creation_date, \
                  attribute: Proc.new { |n| l(n.created_at, format: :long) if n.created_at } \
                ), \
                TableBuilderHelper::Column.new( \
                  key: :associated_object, \
                  attribute: Proc.new{|n| n.referential.name}, \
                  link_to: lambda do |compliance_check_set| \
                    referential_path(compliance_check_set.referential_id) \
                  end \
                ), \
                TableBuilderHelper::Column.new( \
                  key: :assigned_to, \
                  attribute: 'parent_type' \
                ), \
                TableBuilderHelper::Column.new(\
                  key: :compliance_control_set, \
                  attribute: Proc.new{ |n| (n.compliance_control_set.name) if n.compliance_control_set} \
                ), \
              ],
              sortable: true,
              links: [:show],
              cls: 'table has-filter has-search'
    - unless @compliance_check_sets.any?
      .row.mt-xs
        .col-lg-12
          = replacement_msg t('compliance_check_sets.search_no_results')
