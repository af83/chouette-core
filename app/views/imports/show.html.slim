- breadcrumb :import, @workbench, @import

- page_header_content_for @import

.page_content
  .container-fluid
    .row
      .col-lg-6.col-md-6.col-sm-12.col-xs-12
        - metadata = { t('.data_recovery') => '-', t('.filename') => @import.try(:file_identifier)}
        - metadata = metadata.update({t('.status') => import_status(@import.status, verbose: true) })
        = definition_list t('metadatas'), metadata

    .col-lg-12
      .error_messages
        = render 'shared/iev_interfaces/messages', messages: @import.messages

    - if @import.resources.any?
      .col-lg-12
        = table_builder_2 @import.resources,
          [ \
            TableBuilderHelper::Column.new( \
              name: t('.referential_name'), \
              attribute: 'name', \
              sortable: false, \
              link_to: lambda do |item| \
                referential_path(item.referential) if item.referential.present? \
              end \
            ), \
            TableBuilderHelper::Column.new( \
              key: :status, \
              attribute: Proc.new { |n| import_status(n.status) }, \
              sortable: false, \
              link_to: lambda do |item| \
                workbench_import_import_resource_path(@import.workbench_id, @import, item) \
              end \
            ), \
            TableBuilderHelper::Column.new( \
              name: t('.stif_control'), \
              attribute: '', \
              sortable: false, \
            ), \
            TableBuilderHelper::Column.new( \
              name: t('.organisation_control'), \
              attribute: '', \
              sortable: false, \
            ) \
          ],
          cls: 'table',
          overhead: [ \
            {}, \
            {}, \
            { \
              title: I18n.t('imports.show.summary').html_safe, \
              width: 2, \
              cls: 'overheaded-default colspan="2"' \
            } \
          ]
